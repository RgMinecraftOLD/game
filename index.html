<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>MiniCraft</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
html, body {
  margin:0;
  padding:0;
  overflow:hidden;
  width:100%;
  height:100%;
  background:#87CEEB;
  touch-action: none;
}
#info {
 position:fixed;
 top:10px;
 left:10px;
 color:white;
 font-family:Arial;
 background:rgba(0,0,0,0.4);
 padding:8px;
 border-radius:8px;
 z-index: 10;
}
canvas {
 width:100%;
 height:100%;
 touch-action: none;
}
</style>
</head>
<body>
<div id="info">MiniCraft ‚Äî –ª–µ–≤—ã–π –¥–∂–æ–π—Å—Ç–∏–∫ —Ö–æ–¥—å–±–∞, –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç—å—é —ç–∫—Ä–∞–Ω–∞ —Å–º–æ—Ç—Ä–∏—à—å üôÇ</div>

<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>

<script>
const canvas = document.createElement("canvas");
document.body.appendChild(canvas);

const engine = new BABYLON.Engine(canvas, true);
const scene = new BABYLON.Scene(engine);

scene.clearColor = new BABYLON.Color3(0.5, 0.8, 1.0);
scene.gravity = new BABYLON.Vector3(0, -0.4, 0);
scene.collisionsEnabled = true;

// –ö–∞–º–µ—Ä–∞
const camera = new BABYLON.UniversalCamera("cam", new BABYLON.Vector3(0, 3, -5), scene);
camera.attachControl(canvas, true);
camera.speed = 0.25;
camera.angularSensibility = 400; // —á–µ–º –º–µ–Ω—å—à–µ ‚Äî —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ –ø–æ–≤–æ—Ä–æ—Ç
camera.applyGravity = true;
camera.checkCollisions = true;
camera.ellipsoid = new BABYLON.Vector3(0.5, 1, 0.5);

// –°–≤–µ—Ç
new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0,1,0), scene);

// –ó–µ–º–ª—è
for (let x = -15; x <= 15; x++) {
  for (let z = -15; z <= 15; z++) {
    const box = BABYLON.MeshBuilder.CreateBox("b", {size:1}, scene);
    box.position.set(x, 0, z);

    const mat = new BABYLON.StandardMaterial("m", scene);
    mat.diffuseColor = new BABYLON.Color3(0.3, 0.7, 0.3);
    box.material = mat;

    box.checkCollisions = true;
  }
}

// --- –ú–û–ë–ò–õ–¨–ù–´–ô –î–ñ–û–ô–°–¢–ò–ö ---
const gui = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");

const joystick = new BABYLON.GUI.VirtualJoystick(true);
joystick.setJoystickColor("white");
joystick.setVisible(true);

// –î–≤–∏–∂–µ–Ω–∏–µ
scene.onBeforeRenderObservable.add(() => {
  const delta = joystick.deltaPosition;
  const forward = camera.getDirection(BABYLON.Axis.Z);
  const right = camera.getDirection(BABYLON.Axis.X);

  camera.position.addInPlace(forward.scale(delta.y * 0.05));
  camera.position.addInPlace(right.scale(delta.x * 0.05));
});

engine.runRenderLoop(() => {
  scene.render();
});

window.addEventListener("resize", () => engine.resize());
</script>
</body>
</html>
